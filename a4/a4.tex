\documentclass[12pt]{article}

\usepackage{mathtools}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}

\usepackage{amsmath}
\usepackage[margin=1in]{geometry}
\usepackage{enumerate}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage[normalem]{ulem}
\usepackage[pdftitle={ECE 358 Assignment 4},%
pdfsubject={University of Waterloo, ECE 358},%
pdfauthor={Jason Shao, Lihao Luo, Minghao Lu}]{hyperref}

\title{ECE 358 Assignment 4}
\author{Jason Shao, Lihao Luo, Minghao Lu}
\date{June 23, 2016}

\begin{document}
\maketitle
\renewcommand{\thesubsection}{Problem \arabic{subsection}}


\def\question#1{\item[\bf #1.]}
\def\part#1{\item[\bf #1)]}
\newcommand{\pc}[1]{\mbox{\textbf{#1}}} % pseudocode

\begin{enumerate}
	\item %Q1
	\item %Q2 Jason
	During the first hop, the MTU is 1000 bytes, but the initial packet is 20 + 1800 = 1820 bytes. Therefore, after fragmentation, $f_1$ will have 20 bytes of header and 976 bytes of payload since the offset has to be a multiple of 8 while maximizing the total packet size to less than 1000 bytes.  Similarly, $f_2$ will have a header of 20 bytes and payload of the remaining 1800 - 976 = 824 bytes (offset of 122). \\ \\ Afterwards, $f_1$ undergoes fragmentation again with MTU of 500 bytes. The first part, $f_1.1$ will have 20 bytes for the header and 480 bytes for payload. The second part, $f_1.2$ will have 20 bytes for the header and 480 bytes for payload (offset of 60). The third part, $f_1.3$ will have 20 bytes for the header and 976 - 480 - 480 = 16 bytes for the payload (offset of 120). \\ \\ In conclusion, the final fragments received at the destination in order of offset is:
	\begin{itemize}
		\item First fragment: ID = abcd, More fragments = 1, Fragment offset = 0, Total length = 500 bytes (480 bytes of payload)
		\item Second fragment: ID = abcd, More fragments = 1, Fragment offset = 60, Total length = 500 bytes (480 bytes of payload)
		\item Third fragment: ID = abcd, More fragments = 1, Fragment offset = 120, Total length = 36 bytes (16 bytes of payload)
		\item Fourth fragment: ID = abcd, More fragments = 0, Fragment offset = 122, Total length = 844 bytes (824 bytes of payload)
	\end{itemize}
	\item %Q3 Jason
	\item %Q4 Frank
        Like the assignment suggested, we adopt two premises. 
        (i) at the point in time the slide considers, for every $a \in N'$, $D(a) = d(a)$. 
        (ii) The path $u \rightsquigarrow y$ in the picture, $u \rightsquigarrow x \rightarrow y$,
        is a cheapest path from u to y. Let's call this path $p_1$.\\


        First we prove $D(y) \leq cost(p_1)$. By definition $cost(p_1) = d(x) + c(x,y)$. Since $x \in N'$, 
        by premise (i), $cost(p_1) = D(x) + c(x,y)$. When x was added to $N'$, since y is adjacent to x,
        the algorithm performs $D(y) = min\{D(y), D(x)+c(x,y)\}$, and since the only operations performed on $D(y)$ is to assign
        it a min of its old value and another value, $D(y)$ never increases. Thus $D(y) \leq D(x) + c(x,y)$,
        which combined with $cost(p_1) = D(x) + c(x,y)$, implies $D(y) \leq cost(p_1)$. \\

        Suppose $D(y) \neq d(y)$. Since $d(y)$ is the cheapest cost from u to y, and $D(y)$ is the 
        cost of a path from u to y, $D(y) \geq d(y)$. Since $D(y) \neq d(y)$, $D(y) > d(y)$. 
        Since $d(y) < D(y)$ and $D(y) \leq cost(p_1)$, there must be a path from u to y that is cheaper 
        than $p_1$. But premise (ii) says $p_1$ is a cheapest path from u to y, contradiction. Therefor $D(y) = d(y)$.
        

	\item %Q5 Frank
        
        First we observe $\min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$
        is at least an upper bound on $d_x(y)$. Let $v_1$ be a neighbour of x that achieves the minimum in
        $\min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$, i.e $c(x,v_1)+d_{v_1}(y) = \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$.  
        Let $v_1 \rightsquigarrow y$ be a minimum path from $v_1$
        to y, i.e. $cost(v_1 \rightsquigarrow y) = d_{v_1}(y)$. Observe $x \rightarrow v_1 \rightsquigarrow y$ is a path from x to y. Moreover
        $cost(x \rightarrow v_1 \rightsquigarrow y) = c(x, v_1) + cost(v_1 \rightsquigarrow y) = c(x, v_1) + d_{v_1}(y) =
        \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\})$.
        Since $d_x(y)$ is the cost of the cheapest path from x to y, 
        $d_x(y) \leq cost(x,v_1 \rightsquigarrow y) = \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$. \\

        Suppose $d_x(y) = \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$ is not true, since we proved
        $d_x(y) \leq \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$, it must be the case 
        $d_x(y) < \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$.
        Let $p=x,v_1,v_2,...v_k,y$ be a cheapest path from x to y, then  
        $cost(p) = c(x,v_1) + cost(v_1, v_2,...,v_k,y) < \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$. 
        In particular, $c(x, v_1) + cost(v_1,...,v_k,y) < c(x, v_1) + d_{v_1}(y)$,
        which in turn implies $cost(v_1,...,v_k,y) < d_{v_1}(y)$.
        Since $v_1,...,v_k,y$ is a path from $v_1$ to y and $d_{v_1}(y)$ is the cost of the cheapest path from 
        $v_1$ to y, this is a contradiction. Therefor our assumption, $d_x(y) = \min_{v \in neigh(x)}\{c(x,v) + d_v(y)\}$ is not true,
        must be false.

	\item %Q6 Frank
	\item %Q7 Jason

\end{enumerate}
\end{document}
